<html>
<head>
<title>Рассказы</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="robots" content="noindex,nofollow">
<meta name="copyright" content="swa">
<meta name="Author" content="swa">
<meta http-equiv="Pragma" content="no-cache">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
.catalog {
		width: 100%;
		height: 100%;
		overflow: auto;
		z-index: 1;
		position: absolute;
		overflow: auto;
		word-break: break-all;
		font-size: calc(0.7vw + 1vh + 1vmin);
}
.text {
		top: 20px;
		left: 2px;
		width: 89%;
		height: 30%
		overflow: auto;
		display: none;
		background-color: #ebebeb;
		position: absolute;
		margin-left: auto;
		margin-right: auto;
		margin: 0 auto;
		word-break: break-all;
		font-size: calc(0.85vw + 1vh + 1vmin);
}
#closeabout{
	float: right;
	top: 0;
}
</style>
<script type="text/javascript" charset="utf-8">
document.oncontextmenu = function (){return false};
var max_idx=10;
function getCookie(name) {
	let matches = document.cookie.match(new RegExp("(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"));
	return matches ? decodeURIComponent(matches[1]) : undefined;
}
function setCookie(name, value, options = {}) {
	options = {
		path: '/',
		'max-age': 3600*24*35
		};
		if (options.expires instanceof Date) {
			options.expires = options.expires.toUTCString();
		};
		let updatedCookie = encodeURIComponent(name) + "=" + encodeURIComponent(value);
		for (let optionKey in options) {
			updatedCookie += "; " + optionKey;
			let optionValue = options[optionKey];
			if (optionValue !== true) {
				updatedCookie += "=" + optionValue;
			};
		};
		document.cookie = updatedCookie;
}
</script>
</head>
<body>
<div id="catalog"></div>
</body>
<script>
function showStory(idx) {
	document.getElementById('story'+idx).style.display='';
}
function showContents() {
	let markedPage = (getCookie('read')!=undefined)?getCookie('read'):'';
	let ul = document.createElement("ul");
	document.getElementById('catalog').prepend(ul);
	let nx=1;
	let name_story = '';
	let txt_story = '';
	while (nx<=max_idx) {
		let story = '';
		let li = document.createElement("li");
		li.setAttribute('id', 'li_'+nx);
		li.setAttribute('txt', nx);
		let request = new XMLHttpRequest;
		request.open('GET', 'text/'+nx+'.txt', true);
		request.send();
		request.onload = function () {
			name_story = request.response;
			li.setAttribute('mat',["ебат", "ебич", "блять", "бляцтво", "бляд", "издец", "ахуй", "нихуя", "пизд"].some(e => ~request.response.indexOf(e)));
			li.setAttribute('story_txt',name_story);
			name_story = name_story.slice(0, name_story.indexOf('\n')-1);
			li.innerHTML = name_story;
//			li.innerHTML = name_story + '<p id="story'+nx+'" class="text">'+story+'</p>';
		};
		ul.append(li);
		nx++;
}
showContents();
</script>
</html>